import { useState } from 'react';
import { useDispatch, useSelector } from 'react-redux';
import { loginThunk } from '../../user/thunks';
import { Navigate, useNavigate } from 'react-router-dom';
import './signin.css';
import { NeedHelpContactUs } from '../../util/util';
import MultiRangeSlider from '../../components/SlidingScale/sliding_scale';


const Login = () => {
  const { currentUser } = useSelector((state: any) => state.users);
  const [username, setUsername] = useState('');
  const [password, setPassword] = useState('');
  const dispatch = useDispatch<any>();
  const navigate = useNavigate();
  const handleLoginBtn = () => {
    try {
      dispatch(loginThunk({ username, password }));
    } catch (e) {}
  };

  const handleRegisterBtn = () => {
    return navigate('/preregister');
  };
  if (currentUser) {
    localStorage.setItem('access_token', currentUser.access_token);
    localStorage.setItem('currentUserID', currentUser.id);
    return <Navigate to={'/home'} />;
  }
  return (
    <>
      <div className="logo">
        <svg  width="422" height="91" viewBox="0 0 422 91" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M53.5006 80.6623L74.5142 56.5914C75.3084 55.6817 76.405 55.0901 77.6014 54.926L225.385 34.6563L358.007 19.5881C361.801 19.157 364.658 22.9667 363.183 26.4887L352.111 52.9075C351.411 54.5774 349.863 55.7385 348.064 55.943L57.8317 88.9186C53.296 89.4339 50.4985 84.1011 53.5006 80.6623Z" fill="#D5E866" fill-opacity="0.8" />
          <path d="M81.999 61.776H86.479V25.552H81.999V21.328H117.647V33.232H110.223V25.936H96.847V41.36H105.295V37.52H110.031V49.808H105.295V45.968H96.847V61.776H102.927V66H81.999V61.776ZM129.633 28.048C127.841 28.048 126.433 27.5573 125.409 26.576C124.428 25.5947 123.937 24.272 123.937 22.608V22.288C123.937 20.624 124.428 19.3013 125.409 18.32C126.433 17.3387 127.841 16.848 129.633 16.848C131.425 16.848 132.812 17.3387 133.793 18.32C134.817 19.3013 135.329 20.624 135.329 22.288V22.608C135.329 24.272 134.817 25.5947 133.793 26.576C132.812 27.5573 131.425 28.048 129.633 28.048ZM120.993 61.776H124.833V38.928L120.993 38.096V34.448L134.561 31.696V61.776H138.401V66H120.993V61.776ZM142.431 61.776H146.271V38.928L142.431 38.096V34.448L155.807 31.696V38.032H156.127C156.724 36.3253 157.791 34.8533 159.327 33.616C160.863 32.336 162.975 31.696 165.663 31.696C169.759 31.696 172.639 32.7413 174.303 34.832C176.009 36.88 176.863 39.9733 176.863 44.112V61.776H180.703V66H163.615V61.776H167.135V44.432C167.135 42.1707 166.729 40.5707 165.919 39.632C165.151 38.6507 163.828 38.16 161.951 38.16C161.225 38.16 160.5 38.2667 159.775 38.48C159.049 38.6507 158.409 38.9493 157.855 39.376C157.3 39.76 156.852 40.272 156.51 40.912C156.169 41.5093 155.999 42.256 155.999 43.152V61.776H159.519V66H142.431V61.776ZM198.438 66.768C196.39 66.768 194.534 66.3627 192.87 65.552C191.248 64.6987 189.862 63.504 188.71 61.968C187.558 60.432 186.662 58.5973 186.022 56.464C185.424 54.288 185.126 51.8773 185.126 49.232C185.126 46.5867 185.424 44.1973 186.022 42.064C186.662 39.888 187.558 38.032 188.71 36.496C189.862 34.96 191.248 33.7867 192.87 32.976C194.534 32.1227 196.39 31.696 198.438 31.696C199.632 31.696 200.699 31.8667 201.638 32.208C202.619 32.5067 203.472 32.912 204.198 33.424C204.966 33.936 205.606 34.5333 206.118 35.216C206.63 35.8987 207.035 36.6027 207.334 37.328H207.654V24.592L203.814 23.76V20.112L217.382 17.36V59.536L221.222 60.368V64.016L207.654 66.768V61.008H207.334C206.736 62.5013 205.67 63.8453 204.134 65.04C202.64 66.192 200.742 66.768 198.438 66.768ZM201.702 60.88C203.408 60.88 204.816 60.3467 205.926 59.28C207.078 58.2133 207.654 56.784 207.654 54.992V43.408C207.654 41.616 207.078 40.1867 205.926 39.12C204.816 38.0533 203.408 37.52 201.702 37.52C199.91 37.52 198.416 38.1387 197.222 39.376C196.027 40.6133 195.43 42.4267 195.43 44.816V53.584C195.43 55.9733 196.027 57.7867 197.222 59.024C198.416 60.2613 199.91 60.88 201.702 60.88ZM225.499 61.776H229.979V25.552H225.499V21.328H244.827V25.552H240.347V40.72H257.371V25.552H252.891V21.328H272.219V25.552H267.739V61.776H272.219V66H252.891V61.776H257.371V45.328H240.347V61.776H244.827V66H225.499V61.776ZM293.628 66.768C290.983 66.768 288.637 66.3413 286.589 65.488C284.583 64.592 282.877 63.376 281.469 61.84C280.103 60.2613 279.058 58.4053 278.333 56.272C277.607 54.096 277.245 51.728 277.245 49.168C277.245 46.48 277.607 44.048 278.333 41.872C279.101 39.696 280.167 37.8613 281.533 36.368C282.941 34.8747 284.605 33.7227 286.525 32.912C288.487 32.1013 290.663 31.696 293.053 31.696C295.442 31.696 297.597 32.0587 299.517 32.784C301.437 33.5093 303.058 34.5547 304.381 35.92C305.746 37.2427 306.791 38.864 307.517 40.784C308.242 42.704 308.604 44.8373 308.604 47.184V49.36H287.549V51.92C287.549 54.7787 288.295 56.9333 289.789 58.384C291.282 59.8347 293.266 60.56 295.741 60.56C298.045 60.56 299.901 60.048 301.309 59.024C302.717 57.9573 303.719 56.6773 304.317 55.184L307.837 57.296C307.453 58.3627 306.898 59.4507 306.173 60.56C305.447 61.6693 304.509 62.6933 303.357 63.632C302.205 64.528 300.818 65.2747 299.197 65.872C297.575 66.4693 295.719 66.768 293.628 66.768ZM287.549 45.328H298.557V44.432C298.557 41.36 298.066 39.2053 297.085 37.968C296.103 36.7307 294.759 36.112 293.053 36.112C291.346 36.112 290.002 36.7307 289.021 37.968C288.039 39.2053 287.549 41.36 287.549 44.432V45.328ZM313.431 61.776H317.271V38.928L313.431 38.096V34.448L326.807 31.696V38.032H327.062C327.66 36.24 328.62 34.7467 329.943 33.552C331.265 32.3147 332.993 31.696 335.127 31.696C337.217 31.696 338.86 32.272 340.055 33.424C341.249 34.5333 341.847 36.0693 341.847 38.032C341.847 39.7387 341.399 41.0827 340.503 42.064C339.607 43.0453 338.348 43.536 336.727 43.536C335.191 43.536 334.017 43.1307 333.207 42.32C332.396 41.4667 331.991 40.464 331.991 39.312C331.991 38.8 332.097 38.3307 332.311 37.904C332.524 37.4773 332.78 37.2 333.079 37.072L333.015 36.752C332.887 36.7093 332.695 36.688 332.439 36.688C331.756 36.688 331.095 36.88 330.455 37.264C329.815 37.648 329.239 38.1387 328.727 38.736C328.215 39.3333 327.788 39.9947 327.447 40.72C327.148 41.4453 326.999 42.1493 326.999 42.832V61.776H332.119V66H313.431V61.776Z" fill="#2F2E2E" />
        </svg>
      </div>
      <div className='formContainer'>
        <h1 className='signinTitle'>Sign-In as a Job Seeker</h1>
        
        <input
          className='usernameField form-control'
          onChange={e => setUsername(e.target.value)}
          placeholder=' Email or Phone'
          value={username}
        />
        
        <input
          onChange={e => setPassword(e.target.value)}
          className='form-control passwordField'
          placeholder=' Password'
          type='assword'
          value={password}
        />
        <div className='forgotPassword'>Forgot Password?</div>
        <button className='btn btn-primary signinButton' onClick={handleLoginBtn}>
          Sign In
        </button>

        <div className='newto'>
          <span className='newToFoundHer'>New to Foundher?</span>
          <span className='createAnAccount' onClick={handleRegisterBtn}>
            Create an Account</span>
        </div>
        <NeedHelpContactUs/>
        {/* <div className='help'>
          <span className='needHelp'> Need Help?</span>
          <span className='contactUs' onClick={handleRegisterBtn}>
            Contact Us
          </span>
        </div> */}
      </div>
    </>
  );
};
export default Login;
